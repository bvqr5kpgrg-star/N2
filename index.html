<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>HELL ISLE ‚Äì CARD CAMPAIGN</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;background:#000;color:#eee;font-family:monospace}
#game{max-width:480px;margin:auto;padding:10px}
h1{text-align:center;letter-spacing:4px}

#arena{
height:260px;
background:radial-gradient(circle,#553,#221);
border:2px solid #333;
position:relative;
}

#ui{margin-top:6px}
#hand{display:flex;gap:6px;margin-top:6px}

.card{
flex:1;
background:#111;
border:1px solid #444;
padding:6px;
text-align:center;
cursor:pointer;
}
.card:hover{background:#8b0000}

button{
width:100%;
padding:10px;
margin-top:6px;
background:#111;
color:#fff;
border:1px solid #333;
}
button:hover{background:#8b0000}

.float{
position:absolute;
animation:float 1s forwards;
font-size:14px;
}
@keyframes float{
from{opacity:1;transform:translateY(0)}
to{opacity:0;transform:translateY(-30px)}
}
</style>
</head>

<body>
<div id="game">
<h1>HELL ISLE</h1>

<div id="arena">
<canvas id="c" width="460" height="260"></canvas>
</div>

<div id="ui">
<div id="stats"></div>
<div id="hand"></div>
<button onclick="openDeck()">DECK</button>
<button onclick="closeDeck()">BACK</button>
</div>
</div>

<script>
const c=document.getElementById("c"),ctx=c.getContext("2d");

/* ===== CAMPAIGN ===== */
let campaign={
episode:1,
maxEpisode:4
};

/* ===== PLAYER ===== */
let player={
hp:100,maxHp:100,energy:3,
deck:[
{name:"Slash",cost:1,damage:10},
{name:"Burn Blade",cost:2,damage:8,status:"burn"},
{name:"Focus",cost:1,heal:8}
],
hand:[],
status:{}
};

/* ===== ENEMY ===== */
let enemy={};

/* ===== STATUS LOGIC ===== */
function applyStatus(target,status){
target.status[status]=(target.status[status]||0)+2;
}
function tickStatus(target){
for(let s in target.status){
if(s==="poison"){target.hp-=3;float("-3 ‚ò†Ô∏è")}
if(s==="burn"){target.hp-=4;float("-4 üî•")}
if(s==="stun"){delete target.status[s];return true}
target.status[s]--;
if(target.status[s]<=0)delete target.status[s];
}
return false;
}

/* ===== DRAW ===== */
function draw(){
ctx.clearRect(0,0,460,260);

/* arena */
ctx.fillStyle="#332";
ctx.fillRect(0,110,460,80);

/* enemy portrait */
ctx.fillStyle="#060";
ctx.beginPath();ctx.arc(230,60,24,0,Math.PI*2);ctx.fill();

/* player portrait */
ctx.fillStyle="#a00";
ctx.beginPath();ctx.arc(230,200,24,0,Math.PI*2);ctx.fill();

/* hp bars */
ctx.fillStyle="red";
ctx.fillRect(160,35,(enemy.hp/enemy.maxHp)*140,6);
ctx.fillRect(160,225,(player.hp/player.maxHp)*140,6);
}

/* ===== CARDS ===== */
function drawHand(){
const h=document.getElementById("hand");
h.innerHTML="";
player.hand.forEach((c,i)=>{
let d=document.createElement("div");
d.className="card";
d.innerHTML=`${c.name}<br>‚ö°${c.cost}`;
d.onclick=()=>playCard(i);
h.appendChild(d);
});
}

/* ===== GAME FLOW ===== */
function startBattle(){
enemy=generateEnemy();
startTurn();
}

function startTurn(){
player.energy=3;
player.hand=[];
for(let i=0;i<3;i++){
player.hand.push(player.deck[Math.floor(Math.random()*player.deck.length)]);
}
update();
}

function playCard(i){
let card=player.hand[i];
if(card.cost>player.energy)return;
player.energy-=card.cost;

if(card.damage){
enemy.hp-=card.damage;
if(card.status)applyStatus(enemy,card.status);
float("-"+card.damage);
}
if(card.heal){
player.hp=Math.min(player.maxHp,player.hp+card.heal);
float("+"+card.heal,"#4f4");
}

if(enemy.hp<=0){victory();return;}

enemyTurn();
startTurn();
}

function enemyTurn(){
if(tickStatus(enemy))return;
player.hp-=enemy.damage;
float("-"+enemy.damage);
}

/* ===== ENEMY ===== */
function generateEnemy(){
let base=campaign.episode*10;
return{
hp:60+base,
maxHp:60+base,
damage:8+campaign.episode*2,
status:{}
};
}

/* ===== VICTORY & CAMPAIGN ===== */
function victory(){
campaign.episode++;
if(campaign.episode>campaign.maxEpisode){
alert("Campaign Complete!");
campaign.episode=1;
}
player.hp=player.maxHp;
startBattle();
}

/* ===== DECK BUILDER ===== */
function openDeck(){
let txt="DECK:\n";
player.deck.forEach(c=>txt+=c.name+"\n");
alert(txt);
}
function closeDeck(){}

/* ===== UI ===== */
function float(text,color="#f44"){
let d=document.createElement("div");
d.className="float";
d.style.left="220px";
d.style.top="130px";
d.style.color=color;
d.innerText=text;
document.getElementById("arena").appendChild(d);
setTimeout(()=>d.remove(),1000);
}
function update(){
document.getElementById("stats").innerText=
`EP ${campaign.episode} ‚ù§Ô∏è ${player.hp}/${player.maxHp} ‚ö° ${player.energy}`;
draw();drawHand();
}

/* ===== START ===== */
startBattle();
update();
</script>
</body>
</html>
